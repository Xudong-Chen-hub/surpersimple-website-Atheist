<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>生日祝福</title>
    <script src="https://cdn.tailwindcss.com/3.3.3"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap");
      @import url("https://fonts.googleapis.com/css2?family=Parisienne&display=swap");

      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        touch-action: manipulation;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: "Arial", sans-serif;
      }

      .birthday-text {
        font-size: 3rem;
        font-weight: bold;
        text-align: center;
        margin-bottom: 2rem;
        background: linear-gradient(
          to right,
          #ff6b6b,
          #ffa3a3,
          #feca57,
          #ff9ff3,
          #48dbfb,
          #1dd1a1
        );
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        animation: glow 2s ease-in-out infinite alternate;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        z-index: 10;
        position: relative;
      }

      .birthday-text-en {
        font-family: "Dancing Script", cursive;
        font-size: 2rem;
        text-align: center;
        margin-bottom: 2rem;
        color: rgba(255, 255, 255, 0.7);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        z-index: 10;
        position: relative;
        width: 100%;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }

      @keyframes glow {
        from {
          text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }
        to {
          text-shadow: 0 0 20px rgba(255, 255, 255, 0.6),
            0 0 30px rgba(255, 255, 255, 0.4);
        }
      }

      .canvas-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      .instructions {
        color: rgba(255, 255, 255, 0.7);
        font-size: 1.2rem;
        margin-top: 1rem;
        z-index: 10;
        animation: fadeInOut 3s infinite;
      }

      @keyframes fadeInOut {
        0%,
        100% {
          opacity: 0.5;
        }
        50% {
          opacity: 1;
        }
      }

      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle 2s infinite alternate, move 10s linear infinite;
        z-index: 0;
      }

      @keyframes twinkle {
        from {
          opacity: 0.3;
          transform: scale(1);
        }
        to {
          opacity: 1;
          transform: scale(1.2);
        }
      }

      @keyframes move {
        0% {
          transform: translate(0, 0);
        }
        100% {
          transform: translate(10px, 10px);
        }
      }

      .ribbon {
        position: absolute;
        width: 150px;
        height: 150px;
        background: linear-gradient(45deg, #ff6b6b, #ff9ff3, #48dbfb);
        opacity: 0.2;
        z-index: 0;
        clip-path: polygon(0 0, 100% 0, 100% 100%);
      }

      .ribbon.top-left {
        top: 0;
        left: 0;
        transform: rotate(0deg);
      }

      .ribbon.top-right {
        top: 0;
        right: 0;
        transform: rotate(90deg);
      }

      .ribbon.bottom-left {
        bottom: 0;
        left: 0;
        transform: rotate(270deg);
      }

      .ribbon.bottom-right {
        bottom: 0;
        right: 0;
        transform: rotate(180deg);
      }

      .background-text {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-family: "Brush Script MT", cursive;
        font-size: 15rem;
        color: rgba(255, 255, 255, 0.05);
        z-index: 0;
        text-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
        white-space: nowrap;
        width: 50%;
        text-align: center;
      }

      /* .background-text::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 120%;
        height: 120%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        border-radius: 50%;
        z-index: -1;
      } */

      @media (max-width: 768px) {
        .birthday-text {
          font-size: 2rem;
        }
        .birthday-text-en {
          font-size: 1.5rem;
        }
        .instructions {
          font-size: 1rem;
        }
        .background-text {
          font-size: 8rem;
        }
      }

      @media (max-width: 480px) {
        .birthday-text {
          font-size: 1.5rem;
        }
        .birthday-text-en {
          font-size: 1.2rem;
        }
        .instructions {
          font-size: 0.9rem;
        }
        .background-text {
          font-size: 5rem;
        }
      }
    </style>
  </head>

  <body>
    <div class="canvas-container" id="canvasContainer"></div>
    <div class="ribbon top-left"></div>
    <div class="ribbon top-right"></div>
    <div class="ribbon bottom-left"></div>
    <div class="ribbon bottom-right"></div>

    <div class="background-text">Happy birthday!</div>

    <h1 class="birthday-text">李佳亿 生日快乐！</h1>
    <h2 class="birthday-text-en">Happy Birthday Li Jiayi!</h2>
    <p class="instructions">点击屏幕放烟花</p>

    <audio id="birthdayAudio" loop>
      <source
        src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
        type="audio/mpeg"
      />
    </audio>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // 创建画布
        const container = document.getElementById("canvasContainer");
        const canvas = document.createElement("canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        container.appendChild(canvas);
        const ctx = canvas.getContext("2d");

        // 自动播放背景音乐
        const audio = document.getElementById("birthdayAudio");
        document.addEventListener(
          "click",
          function () {
            audio.play().catch((e) => console.log("自动播放被阻止:", e));
          },
          { once: true }
        );

        // 烟花数组
        let fireworks = [];
        let particles = [];
        const colors = [
          "#ff6b6b",
          "#ffa3a3",
          "#feca57",
          "#ff9ff3",
          "#48dbfb",
          "#1dd1a1",
        ];

        // 创建星星
        function createStars() {
          for (let i = 0; i < 50; i++) {
            const star = document.createElement("div");
            star.className = "star";
            star.style.width = `${Math.random() * 3 + 1}px`;
            star.style.height = star.style.width;
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 2}s`;
            star.style.animationDuration = `${5 + Math.random() * 10}s`;
            document.body.appendChild(star);
          }
        }

        // 点击事件处理
        let lastClickTime = 0;
        canvas.addEventListener("click", function (e) {
          const now = Date.now();
          const timeDiff = now - lastClickTime;
          lastClickTime = now;

          // 根据点击速度决定烟花数量
          let count = 1;
          if (timeDiff < 300) count = 3;
          if (timeDiff < 200) count = 5;
          if (timeDiff < 100) count = 8;

          for (let i = 0; i < count; i++) {
            createFirework(e.clientX, e.clientY);
          }
        });

        // 创建烟花
        function createFirework(x, y) {
          const firework = {
            x: x,
            y: canvas.height,
            targetX: x,
            targetY: y,
            speed: 2 + Math.random() * 2,
            radius: 2,
            color: colors[Math.floor(Math.random() * colors.length)],
            particles: 50 + Math.floor(Math.random() * 50),
            exploded: false,
          };
          fireworks.push(firework);
        }

        // 创建粒子
        function createParticles(x, y, color, count) {
          for (let i = 0; i < count; i++) {
            const angle = Math.random() * Math.PI * 2;
            const speed = 1 + Math.random() * 3;
            const radius = 1 + Math.random() * 2;
            const lifetime = 50 + Math.floor(Math.random() * 50);

            particles.push({
              x: x,
              y: y,
              vx: Math.cos(angle) * speed,
              vy: Math.sin(angle) * speed,
              radius: radius,
              color: color,
              alpha: 1,
              lifetime: lifetime,
              currentLife: 0,
            });
          }
        }

        // 动画循环
        function animate() {
          requestAnimationFrame(animate);
          // 清除整个画布而不是半透明覆盖
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // 更新烟花
          for (let i = fireworks.length - 1; i >= 0; i--) {
            const f = fireworks[i];

            if (!f.exploded) {
              // 上升阶段
              f.y -= f.speed;

              // 绘制上升轨迹
              ctx.beginPath();
              ctx.arc(f.x, f.y, f.radius, 0, Math.PI * 2);
              ctx.fillStyle = f.color;
              ctx.fill();

              // 检查是否到达目标高度
              if (f.y <= f.targetY) {
                f.exploded = true;
                createParticles(f.x, f.y, f.color, f.particles);
                fireworks.splice(i, 1);
              }
            }
          }

          // 更新粒子
          for (let i = particles.length - 1; i >= 0; i--) {
            const p = particles[i];

            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.05; // 重力
            p.currentLife++;

            // 计算透明度
            p.alpha = 1 - p.currentLife / p.lifetime;

            // 绘制粒子
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
            ctx.fillStyle = `${p.color.replace(")", `, ${p.alpha})`)}`;
            ctx.fill();

            // 移除生命周期结束的粒子
            if (p.currentLife >= p.lifetime) {
              particles.splice(i, 1);
            }
          }
        }

        // 响应式调整
        window.addEventListener("resize", function () {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        });

        // 创建装饰元素
        createStars();

        // 开始动画
        animate();

        // 初始烟花
        for (let i = 0; i < 3; i++) {
          setTimeout(() => {
            createFirework(
              Math.random() * canvas.width * 0.5 + canvas.width * 0.25,
              Math.random() * canvas.height * 0.5 + canvas.height * 0.25
            );
          }, i * 800);
        }
      });
    </script>
  </body>
</html>
