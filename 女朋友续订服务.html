<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>â¤ï¸ æƒ…æ„Ÿç»­è®¢ç³»ç»Ÿ v3.5 â¤ï¸</title>

    <style>
      :root {
        --pink-main: #ff6b8a;
        --pink-light: #ff9a9e;
        --pink-deep: #ff4d6d;
        --bg-gradient: linear-gradient(135deg, #fa709a, #fee140);
        --bg-gradient-calm: linear-gradient(135deg, #fbc2eb, #a6c1ee);
        --bg-gradient-pressure: linear-gradient(135deg, #ff758c, #ff7eb3);
        --text-light: #666;
        --card-bg: rgba(255, 255, 255, 0.88);
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      body {
        background: var(--bg-gradient);
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        overflow: hidden;
        user-select: none;
        transition: background 1s ease;
      }

      #bg-layer {
        position: fixed;
        inset: 0;
        z-index: 0;
        overflow: hidden;
      }

      .bg-particle {
        position: absolute;
        border-radius: 50%;
        opacity: 0.35;
        animation: floatBg linear infinite;
      }

      @keyframes floatBg {
        from {
          transform: translateY(0);
        }
        to {
          transform: translateY(-120vh);
        }
      }

      .card {
        position: relative;
        z-index: 10;
        width: 92%;
        max-width: 440px;
        padding: 42px 32px;
        background: var(--card-bg);
        border-radius: 28px;
        backdrop-filter: blur(14px);
        box-shadow: 0 24px 48px rgba(0, 0, 0, 0.18);
        text-align: center;
        animation: cardEnter 0.6s ease;
      }

      @keyframes cardEnter {
        from {
          opacity: 0;
          transform: translateY(40px) scale(0.96);
        }
        to {
          opacity: 1;
          transform: none;
        }
      }

      h2 {
        font-size: 1.45rem;
        color: var(--pink-deep);
        line-height: 1.65;
        margin: 0 0 34px;
        min-height: 3.5em;
      }

      .btn-group {
        display: flex;
        flex-direction: column;
        gap: 22px;
        align-items: center;
      }

      button {
        width: 230px;
        padding: 16px 0;
        border-radius: 999px;
        border: none;
        font-size: 1.05rem;
        font-weight: 600;
        cursor: pointer;
        transition:
          transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
          opacity 0.3s,
          box-shadow 0.3s;
      }

      button:active {
        transform: scale(0.95);
      }

      #btn-yes {
        background: linear-gradient(
          135deg,
          var(--pink-main),
          var(--pink-light)
        );
        color: #fff;
        box-shadow: 0 12px 26px rgba(255, 107, 138, 0.45);
      }

      #btn-no {
        background: #f2f2f2;
        color: #999;
      }

      .heart {
        position: fixed;
        font-size: 20px;
        pointer-events: none;
        animation: heartFloat 1.6s ease-out forwards;
      }

      @keyframes heartFloat {
        from {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        to {
          opacity: 0;
          transform: translateY(-140px) scale(1.6);
        }
      }

      .success h1 {
        font-size: 3.2rem;
        margin: 0;
      }

      .success p {
        color: var(--text-light);
        line-height: 1.7;
        margin-top: 14px;
      }
    </style>
  </head>

  <body>
    <div id="bg-layer"></div>

    <div class="card" id="app">
      <h2 id="dialog"></h2>
      <div class="btn-group">
        <button id="btn-yes">æ°¸ä¹…ç»­è®¢</button>
        <button id="btn-no">ç‹ å¿ƒé€€è®¢</button>
      </div>
    </div>

    <script>
      const App = {};

      App.dom = {
        root: document.getElementById("app"),
        dialog: document.getElementById("dialog"),
        yes: document.getElementById("btn-yes"),
        no: document.getElementById("btn-no"),
        bg: document.getElementById("bg-layer"),
      };

      App.emotion = {
        rejectCount: 0,
        intensity() {
          return Math.min(this.rejectCount, 6);
        },
      };

      App.script = {
        init: "ç³»ç»Ÿæ£€æµ‹åˆ°æ‚¨çš„ã€Œå¥³æœ‹å‹æœåŠ¡ã€å·²åˆ°æœŸ ğŸ’”<br>æ˜¯å¦ç»§ç»­ç»­è®¢ï¼Ÿ",
        negotiation: [
          "è¯¶ï¼ŸçœŸçš„ä¸è€ƒè™‘ä¸€ä¸‹å˜› ğŸ¥º",
          "å°å®å†è€ƒè™‘ä¸€ä¸‹å˜›ï¼Œå¥½ä¸å¥½å˜› ğŸ’•",
          "å†æ‹’ç»çš„è¯â€¦æˆ‘ä¼šæœ‰ç‚¹éš¾è¿‡äº†",
        ],
        pressure: [
          "å·²ç»èµ°åˆ°è¿™ä¸€æ­¥äº†å‘¢ï¼Œå°±ç»­è®¢å§ ğŸ˜³",
          "é€€è·¯å¥½åƒæ…¢æ…¢æ¶ˆå¤±äº†â€¦",
          "å˜¿å˜¿å˜¿ï¼Œç°åœ¨ï¼Œå¥½åƒåªå‰©ä¸€ä¸ªé€‰é¡¹å•¦ â¤ï¸",
        ],
        success: "ç»­è®¢æˆåŠŸï¼<br>æœåŠ¡ç³»ç»Ÿå·²æ°¸ä¹…æ¿€æ´» ğŸŒ¹",
      };

      App.bgParticles = {
        init() {
          for (let i = 0; i < 18; i++) {
            const p = document.createElement("div");
            p.className = "bg-particle";
            const size = Math.random() * 120 + 40;
            p.style.width = size + "px";
            p.style.height = size + "px";
            p.style.left = Math.random() * 100 + "%";
            p.style.top = Math.random() * 100 + "%";
            p.style.background = "rgba(255,255,255,0.6)";
            p.style.animationDuration = 20 + Math.random() * 20 + "s";
            this.bg.appendChild(p);
          }
        },
      };

      App.anim = {
        heart(x, y) {
          const h = document.createElement("div");
          h.className = "heart";
          h.textContent = "â¤ï¸";
          h.style.left = x + "px";
          h.style.top = y + "px";
          document.body.appendChild(h);
          setTimeout(() => h.remove(), 1600);
        },
      };

      App.renderDialog = (t) => (App.dom.dialog.innerHTML = t);

      App.lockRejectButton = function () {
        const btn = this.dom.no;
        btn.style.opacity = 0;
        btn.style.transform = "scale(0)";
        btn.style.pointerEvents = "none";
        btn.setAttribute("disabled", "disabled");
      };

      App.onReject = function () {
        if (this.emotion.rejectCount >= 6) return;

        this.emotion.rejectCount++;
        const level = this.emotion.intensity();

        this.dom.yes.style.transform = `scale(${1 + level * 0.22})`;

        this.dom.no.style.transform = `
          translate(${(Math.random() - 0.5) * 160}px,
                    ${(Math.random() - 0.5) * 120}px)
          scale(${1 - level * 0.08})
        `;

        const r = this.dom.no.getBoundingClientRect();
        this.anim.heart(r.left + r.width / 2, r.top);

        if (level <= 3) {
          this.renderDialog(this.script.negotiation[level - 1]);
        } else {
          this.renderDialog(this.script.pressure[Math.min(level - 4, 2)]);
        }

        if (level === 6) this.lockRejectButton();
      };

      App.onAccept = function () {
        this.dom.root.innerHTML = `
          <h1>ğŸŒ¹</h1>
          <h2>${this.script.success}</h2>
          <p>ä»ç°åœ¨å¼€å§‹ï¼Œ<br>ä½ å°±æ˜¯æˆ‘çš„å”¯ä¸€æ°¸ä¹…ä¸“å±å®¢æˆ·ï¼Œ<br>æ˜¯è¢«æˆ‘åçˆ±çš„é‚£ä¸€ä¸ª â¤ï¸</p>
        `;
      };

      App.dom.no.addEventListener("click", () => App.onReject());
      App.dom.yes.addEventListener("click", () => App.onAccept());

      App.renderDialog(App.script.init);
    </script>
  </body>
</html>
